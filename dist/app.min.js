"use strict";var express=require("express"),routes=require("./routes"),http=require("http"),path=require("path"),urlencoded=require("url"),bodyParser=require("body-parser"),json=require("json"),logger=require("logger"),methodOverride=require("method-override"),nano=require("nano")("http://drstone:loveisone@localhost:5984"),db=nano.use("address"),app=express();app.set("port",process.env.PORT||3e3),app.set("views",path.join(__dirname,"views")),app.set("view engine","jade"),app.use(bodyParser.json()),app.use(bodyParser.urlencoded()),app.use(methodOverride()),app.use(express.static(path.join(__dirname,"public"))),app.get("/",routes.index),app.post("/createdb",function(r,o){nano.db.create(r.body.dbname,function(e){e?o.send("Error careating the Database"+r.body.dbname):o.send("Database "+r.body.dbname+"created succesfully")})}),app.post("/new_contact",function(e,n){var r=e.body.name,o=e.body.phone;db.insert({name:r,phone:o,crazy:!0},o,function(e,r,o){e?n.send("Error creating contact"):n.send("Contact created succesfully")})}),app.post("/view_contact",function(e,o){var n="Follofwing are the contacts";db.get(e.body.phone,{revs_info:!0},function(e,r){e&&console.log(r),r?n+="Nmae:"+r.name+"<br/>Phone Number:"+r.phone:n="No records found",o.send(n)})}),app.post("/delete_contact",function(o,n){db.get(o.body.phone,{revs_info:!0},function(e,r){e&&db.destroy(o.body.phone,r._rev,function(e,r){e?n.send("Error deleting contact"):n.send("Contacts deleted succesfully")})})}),http.createServer(app).listen(app.get("port"),function(){console.log("Express server listeninig on port"+app.get("port"))});
//# sourceMappingURL=app.min.js.map
