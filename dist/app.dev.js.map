{"version":3,"sources":["app.js"],"names":["express","require","routes","http","path","urlencoded","bodyParser","json","logger","methodOverride","nano","db","use","app","set","process","env","PORT","join","__dirname","get","index","post","req","res","create","body","dbname","err","send","name","phone","insert","crazy","photo","header","alldoc","revs_info","console","log","destroy","_rev","createServer","listen"],"mappings":"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","sourcesContent":["var express = require(\"express\");\r\nvar routes = require(\"./routes\");\r\nvar http = require(\"http\");\r\nvar path = require(\"path\");\r\nvar urlencoded = require(\"url\");\r\nvar bodyParser = require(\"body-parser\");\r\nvar json = require(\"json\");\r\nvar logger = require(\"logger\");\r\nvar methodOverride = require(\"method-override\");\r\nvar nano = require(\"nano\")(\"http://localhost:5948\");\r\nvar db = nano.use(\"address\");\r\n\r\nvar app = express;\r\n\r\napp.set(\"port\", process.env.PORT || 3000);\r\napp.set(\"views\", path.join(__dirname, \"views\"));\r\napp.set(\"view engine\", \"jade\");\r\n\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded());\r\napp.use(methodOverride());\r\napp.use(express.static(path.join(__dirname, \"public\")));\r\n\r\napp.get(\"/\", routes.index);\r\n\r\napp.post(\"/createdb\", (req, res) => {\r\n  nano.db.create(req.body.dbname, (err) => {\r\n    if (err) {\r\n      res.send(\"Error careating the Database\" + req.body.dbname);\r\n      return;\r\n    }\r\n    res.send(\"Database \" + req.body.dbname + \"created succesfully\");\r\n  });\r\n});\r\n\r\napp.post(\"/new_contact\", (req, res) => {\r\n  var name = req.body.name;\r\n  var phone = req.body.phone;\r\n\r\n  db.insert({ name, phone, crazy: true }, photo, (err, body, header) => {\r\n    if (err) {\r\n      res.send(\"Error creating contact\");\r\n      return;\r\n    }\r\n    res.send(\"Contact created succesfully\");\r\n  });\r\n});\r\n\r\napp.post(\"/view_contact\", (req, res) => {\r\n  var alldoc = \"Follofwing are the contacts\";\r\n  db.get(req.body.phone, { revs_info: true }, (err, body) => {\r\n    if (err) {\r\n      console.log(body);\r\n    }\r\n    if (body) {\r\n      alldoc += \"Nmae:\" + body.name + \"<br/>Phone Number:\" + body.phone;\r\n    } else {\r\n      alldoc = \"No records found\";\r\n    }\r\n    res.send(alldoc);\r\n  });\r\n});\r\n\r\napp.post(\"/delete_contact\", (req, res) => {\r\n  db.get(req.body.phone, { revs_info: true }, (err, body) => {\r\n    if (err) {\r\n      db.destroy(req.body.phone, body._rev, (err, body) => {\r\n        if (err) {\r\n          res.send(\"Error deleting contact\");\r\n          return;\r\n        }\r\n        res.send(\"Contacts deleted succesfully\");\r\n      });\r\n    }\r\n  });\r\n});\r\n\r\nhttp.createServer(app).listen(app.get(\"port\"), () => {\r\n  console.log(\"Express server listeninig on port\" + app.get(\"port\"));\r\n});\r\n"],"file":"app.dev.js"}